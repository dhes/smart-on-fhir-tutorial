<!DOCTYPE html>
<!-- <script src="./node_module/fhirclient/build/fhir-client.js"></script> -->
<!-- <script src='./lib/js/fhir-client-v2.0.7.js'></script> -->
<!-- or -->
<script src='https://cdn.jsdelivr.net/npm/fhirclient@2.0.7/build/fhir-client.js'></script>
<script>
	// FHIR.oauth2.ready().then(client => client.request("Patient")).then(console.log).catch(console.error);
	// FHIR.oauth2.ready().then(client => client.request("Patient")).then(console.log).catch(console.error);
	FHIR.oauth2.ready().then(function (client) {

		// Render the current patient (or any error)
		client.patient.read().then(
			console.log(JSON.stringify(client.patient))
			// function (pt) {
			// 	document.getElementById("patient").innerText = JSON.stringify(pt, null, 4);
			// },
			// function (error) {
			// 	document.getElementById("patient").innerText = error.stack;
			// }
		);

		// Get MedicationRequests for the selected patient
		// client.request("/MedicationRequest?patient=" + client.patient.id, {
		// 	resolveReferences: ["medicationReference"],
		// 	graph: true
		// })

		// Reject if no MedicationRequests are found
		// .then(function (data) {
		// 	if (!data.entry || !data.entry.length) {
		// 		throw new Error("No medications found for the selected patient");
		// 	}
		// 	return data.entry;
		// })


		// Render the current patient's medications (or any error)
		// .then(
		// 	function (meds) {
		// 		document.getElementById("meds").innerText = JSON.stringify(meds, null, 4);
		// 	},
		// 	function (error) {
		// 		document.getElementById("meds").innerText = error.stack;
		// 	}
		// );

	}).catch(console.error);
</script>